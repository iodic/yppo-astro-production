---
import FeatureBanner from "@/components/features/FeatureBanner.astro";
import ProjecManagement from "@/components/features/ProjecManagement.astro";
import Shape from "@/components/Shape.astro";
import Base from "@/layouts/Base.astro";
import Cta from "@/layouts/partials/Cta.astro";
import { sanityClient } from "sanity:client";

const posts = await sanityClient.fetch(
  `*[_type == 'wiki'] | order(orderRank){
      ...,
      'conflictType': conflictType[]->{
        slug,
        title
      }
  }`
);

const featureBannerData = {
  title: "Wiki",
  banner: {
    title: "Conflict Wiki",
    content:
      "Browse our conflict management library, a comprehensive resource for conflict resolution strategies and techniques.",
    image: "/images/hero.png",
    button: {
      label: "Go to the Conflict Guide",
      link: "/conflict-guide",
      enable: false,
    },
  },
};
---

<Base title="Wiki">
  <Shape />
  <FeatureBanner features={featureBannerData} />
  <ProjecManagement features={posts} />
  <Cta />
</Base>
