---
import { sanityClient } from "sanity:client";

import Shape from "@/components/Shape.astro";
import FeatureBanner from "@/components/features/FeatureBanner.astro";
import ProjecManagement from "@/components/features/ProjecManagement.astro";
import Cta from "@/layouts/partials/Cta.astro";

const { lang } = Astro.props;

const posts = await sanityClient.fetch(
  `*[_type == 'wiki' && language == '${lang}'] | order(orderRank){
      ...,
      'conflictType': conflictType[]->{
        slug,
        title
      },
  }`
);

const featureBannerData = {
  title: "Wiki",
  banner: {
    title: "Conflict Wiki",
    content:
      "Browse our conflict management library, a comprehensive resource for conflict resolution strategies and techniques.",
    image: "/images/hero.png",
    button: {
      label: "Go to the Conflict Guide",
      link: "/conflict-guide",
      enable: false,
    },
  },
};
---

<>
  <Shape />
  <FeatureBanner features={featureBannerData} />
  <ProjecManagement features={posts} />
  <Cta />
</>
