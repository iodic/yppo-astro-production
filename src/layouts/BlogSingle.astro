---
import imageUrlBuilder from "@sanity/image-url"
import { PortableText } from "@portabletext/react"
import { sanityClient } from "sanity:client"
const builder = imageUrlBuilder(sanityClient)

import { Image } from "astro:assets"
import SignUpButton from "@/partials/SignUpButton.astro"

const { post, generalText } = Astro.props

const { signUpButton } = post
---

<section class="section blog-single">
  <div class="container">
    <div class="row justify-center">
      <div class="lg:col-10">
        <Image class="w-full rounded-xl" src={builder.image(post.image).url()} alt="" width={800} height={500} />
      </div>
      <div class="mt-10 max-w-[810px] lg:col-9">
        <h1 class="h2">
          {post.title}
        </h1>

        <div class="content">
          {
            post.videoUrl && (
              <video class="mb-6" controls playsinline poster={builder.image(post.videoPoster).url()}>
                <source src={post.videoUrl} />
              </video>
            )
          }

          {post && post.content && <PortableText value={post.content} />}

          {signUpButton && <SignUpButton signUpButton={signUpButton} />}
        </div>
        <button class="btn border-0 pl-0 pr-0 back-button">
          {generalText?.backToCoursesButton ? generalText?.backToCoursesButton : "‚Üê Back"}
        </button>
      </div>
    </div>
  </div>
  <script is:inline>
    document.querySelector(".back-button").addEventListener("click", () => {
      window.history.go(-1)
    })
  </script>
</section>
